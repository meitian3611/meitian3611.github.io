---
title: 小程序组件通信
date: 2020-01-13 10:41:13
tags:
	- 前端
	- 使用方法
	- 教程
categories: 小程序
---

## 构建npm

1. `npm init`
2. 安装所需要的包（库）
3. 本地设置中，开启npm的模块
4. 工具栏中点击构建npm

## 使用字体图标

1. 下载到本地目录
2. 使用线上地址
   1. 下载阿里图标库本地Unicode代码
   2. 将下载的iconfont.css 的代码复制到小程序项目的 app.wxss 中
   3. 将app.wxss 中的 font-face 的代码使用线上的 font-face 代码进行替换
   4. 正常使用 `<view class="iconfont iconyingyuan"></view>`

## 使用 Vant Weapp

1. 安装组件库  ` npm i @vant/weapp -S --production `

2. 构建 npm 包

3. 全局或局部引入需要使用的组件

   ```json
   // app.json
   "usingComponents": {
     "van-button": "@vant/weapp/button"
   }
   ```

   

## 自定义组件

1. 创建组件
   1. 在根目录创建一个组件目录components
   2. 创建一个Demo目录
   3. 在Demo目录创建一个component文件类型的Demo文件
2. 注册组件，使用方法和 Vant引入组件 一样
3. 使用组件

## 组件的通信

### 父传子

```js
// demo.js
properties: {
    name: {
      type: String,
      value: '我是demo组件'
    }}
```

```html
<!-- demo.wxml -->
<view class="demo">{{name}}</view>
```

```html
<!-- index.wxml -->
<my-demo name="我是修改后的demo组件"></my-demo>
```

### 子传父

```html
<!-- demo.wxml -->
<view class="demo">{{name}}</view>
<button bindtap="son">点击修改父级 name</button>
```

```js
// demo.js
methods: {
    son() {
      this.triggerEvent('abc','子修改父级')
    }
  }
```

```html
<!-- index.wxml -->
<my-demo name="{{name}}" bindabc="father"></my-demo>
```

```js
// index.js
Page({
  data: {
    name: 'index的name'
  },
  father(e) {
    this.setData({
      name: e.detail
    })
  }
})
```

